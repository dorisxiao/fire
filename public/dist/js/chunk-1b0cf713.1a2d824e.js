(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b0cf713"],{"5ee1":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return r})),a.d(e,"f",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return c}));var i=a("a27e");function n(t){return Object(i["a"])({url:"/batch/array",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/batch/score/array",method:"post",params:t})}function r(t){return Object(i["a"])({url:"/batch/score/commit",method:"post",params:t})}function s(t){return Object(i["a"])({url:"/batch/score/fire",method:"post",params:t})}function l(t){return Object(i["a"])({url:"/batch/modify",method:"post",params:t})}function c(t){return Object(i["a"])({url:"/batch/score/user/delete",method:"post",params:t})}},aad5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("h3",[t._v("违规数据管理")]),a("div",{staticClass:"contain"},[a("div",{staticClass:"table_container"},[a("el-row",{staticClass:"readWrapper"}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+(t.paginations.pageIndex-1)*t.paginations.pageSize+1)+" ")])]}}])}),a("el-table-column",{attrs:{property:"batch_name",label:"批次",align:"center"}}),a("el-table-column",{attrs:{property:"submit",label:"批次状态",width:"100px",formatter:t.pcState,align:"center"}}),a("el-table-column",{attrs:{property:"updateTime",label:"时间段",formatter:t.formatTime,align:"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.editClick(e.row)}}},[t._v("查看录入情况")])]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[t.paginations.total>0?a("el-pagination",{attrs:{"page-sizes":t.paginations.pageSizes,"page-size":t.paginations.pageSize,layout:t.paginations.layout,total:t.paginations.total,"current-page":t.paginations.pageIndex},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)])],1)],1)]),a("el-dialog",{attrs:{title:"详情",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.gridData}},[a("el-table-column",{attrs:{property:"name",label:"名字",width:"100"}}),a("el-table-column",{attrs:{property:"type",label:"状态",width:"270",formatter:t.formatter}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{"v-show":e.type,type:"primary",size:"small"},on:{click:function(a){return t.remove(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1)},n=[],o=(a("6d57"),a("ff21"),a("163d"),a("5ee1")),r={data:function(){return{valueDate:"",nameSearch:"",value:"",form:{ball:0,height:0},weapon:{10:0,12:0,15:0,255:0},gridData:[],user:this.sessionData("get","user"),dialogFormVisible2:!1,formLabelWidth:"120px",tableData:[],optionsFS:[],about:"",loading:!1,dialogTableVisible:!1,paginations:{total:0,pageIndex:1,pageSize:10,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},selectId:""}},mounted:function(){this.ccList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:1}})},methods:{remove:function(t){var e=this,a={uid:t.id,_id:t._id};Object(o["e"])(a).then((function(t){0==t.code&&(e.$message({message:"违规成绩删除成功！",type:"success"}),e.dialogTableVisible=!1)}))},pcState:function(t){return t.submit?"已归档":"未归档"},handleClick:function(t){},handleAreaChange:function(t){this.form.fire=t},add:function(){var t=this,e={_id:this.selectId,uid:this.user._id,weapon:this.weapon,foul:{height:this.form.height,ball:this.form.ball,report:this.form.report,fire:this.form.fire||[],other:Number(this.form.other||0)},about:this.about};Object(o["c"])(e).then((function(e){0==e.code&&(t.$message({message:"违规数据录入成功！",type:"success"}),t.dialogFormVisible2=!1)}))},formatter:function(t){return t.type?"已录":"未录"},setfire:function(t){var e=this;this.selectId=t,Object(o["f"])({_id:t,uid:this.user._id}).then((function(t){if(0==t.code){var a=e.$unfly(t.data);console.log("违规发射",a),a.forEach((function(t){t.info=t.miss+"--"+e.$tool.formatDate(new Date(t.time))})),e.dialogFormVisible2=!0,e.optionsFS=a}}))},formatTime:function(t){return t.timeD=this.$tool.formatDate(new Date(t.start))+"--"+this.$tool.formatDate(new Date(t.end)),t.timeD},editClick:function(t){var e=[];for(var a in t.score)t.score[a]._id=t._id,e.push(t.score[a]);this.gridData=e,this.dialogTableVisible=!0},ccList:function(t){var e=this,a=this.$tool.deep(t);a.index-=1,Object(o["b"])(a).then((function(t){if(0==t.code){var a=e.$unfly(t.data);e.loading=!1,e.paginations.total=a.total;var i=a.users;a.array.forEach((function(t){t.name="",t.loser.forEach((function(e){t.name+=i[e],t.name+=" "})),t.name+="VS ",t.winner.forEach((function(e){t.name+=i[e],t.name+=" "}))})),console.log("88888888888888",a),e.tableData=a.array,e.paginations.total=a.total}}))},handleSizeChange:function(t){this.paginations.pageSize=t,this.ccList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:1}})},handleCurrentChange:function(t){this.paginations.pageIndex=t,this.ccList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:1}})}}},s=r,l=(a("d8a3"),a("4023")),c=Object(l["a"])(s,i,n,!1,null,"1fc64f6f",null);e["default"]=c.exports},c342:function(t,e,a){},d8a3:function(t,e,a){"use strict";var i=a("c342"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-1b0cf713.1a2d824e.js.map