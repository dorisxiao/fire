(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0c24648"],{1570:function(e,t,a){"use strict";var i=a("e42f"),s=a.n(i);s.a},"324d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("h3",[e._v("理论水平")]),a("div",{staticClass:"contain"},[a("div",{staticClass:"table_container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"readWrapper"},[e.addShow?a("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:function(t){return e.modelShow("成绩录入")}}},[e._v("成绩录入")]):e._e(),e.addShow?a("el-button",{staticClass:"search search2"},[a("a",{attrs:{href:e.href}},[e._v("下载模板")])]):e._e(),a("el-upload",{staticClass:"upload-demo",attrs:{action:e.url,multiple:"","on-success":e.handleVideoSuccess}},[e.addShow?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传理论考试成绩")]):e._e()],1)],1)])],1),a("el-row",{staticClass:"headerSearch"},[a("el-select",{attrs:{filterable:"",placeholder:"请选择人员"},on:{change:e.selectGet},model:{value:e.searchUid,callback:function(t){e.searchUid=t},expression:"searchUid"}},e._l(e.optionsUser,(function(t){return"1"!=t.mode?a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}}):e._e()})),1),a("el-select",{attrs:{placeholder:"请选择考试类型"},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(e.optionsType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{attrs:{type:"daterange","value-format":"timestamp",dateType:"time","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}}),a("div",{staticClass:"readWrapper"},[a("el-button",{staticClass:"search",attrs:{type:"primary"},on:{click:e.searchBut}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.paginations.pageIndex-1)*e.paginations.pageSize+1)+" ")])]}}])}),a("el-table-column",{attrs:{property:"name",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{property:"type",label:"科目",formatter:e.formatType,align:"center"}}),a("el-table-column",{attrs:{property:"score",label:"成绩",align:"center"}}),a("el-table-column",{attrs:{property:"ks_time",label:"考试日期",formatter:e.formatTime,align:"center"}}),1==e.user.mode?a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-edit userBut",attrs:{slot:"reference"},on:{click:function(a){return e.editClick(t.row)}},slot:"reference"}),a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(a){return e.deleteOk(t.row)}}},[a("i",{staticClass:"el-icon-delete userBut",attrs:{slot:"reference"},slot:"reference"})])]}}],null,!1,204633881)}):e._e()],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.paginations.total>0?a("el-pagination",{attrs:{"page-sizes":e.paginations.pageSizes,"page-size":e.paginations.pageSize,layout:e.paginations.layout,total:e.paginations.total,"current-page":e.paginations.pageIndex},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)])],1)],1)]),a("el-dialog",{staticClass:"customWidth",attrs:{title:e.title,visible:e.dialogFormVisible,id:"customWidth"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名:","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"fjzt",attrs:{filterable:"",placeholder:"请选择人员"},on:{change:e.selectGet},model:{value:e.form.uid,callback:function(t){e.$set(e.form,"uid",t)},expression:"form.uid"}},e._l(e.options,(function(e){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"!=e.mode,expression:"item.mode !='1'"}],key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),a("el-form-item",{attrs:{label:"选择类型:","label-width":e.formLabelWidth}},[a("el-select",{staticClass:"fjzt",attrs:{placeholder:"请选择考试类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.optionsType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"成绩:","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.score,callback:function(t){e.$set(e.form,"score",t)},expression:"form.score"}})],1),a("el-form-item",{attrs:{label:"考试日期:","label-width":e.formLabelWidth}},[a("el-date-picker",{staticClass:"fjzt",attrs:{"value-format":"timestamp",dateType:"time",placeholder:"选择日期"},model:{value:e.form.ks_time,callback:function(t){e.$set(e.form,"ks_time",t)},expression:"form.ks_time"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"userButModle",on:{click:e.clean}},[e._v("取 消")]),a("el-button",{staticClass:"userButModle",attrs:{type:"primary"},on:{click:e.add}},[e._v("确定")])],1)],1)],1)},s=[],n=(a("cc57"),a("e697"),a("a27e"));function o(e){return Object(n["a"])({url:"/score/search",method:"post",params:e})}function l(e){return Object(n["a"])({url:"/score/add",method:"post",params:e})}function r(e){return Object(n["a"])({url:"/score/remove",method:"post",params:e})}function c(e){return Object(n["a"])({url:"/score/modify",method:"post",params:e})}var d=a("5f87"),u={data:function(){var e=window.baseURL||sessionStorage.getItem("serverUrl_str")+"/score/xls/upload?token="+Object(d["a"])("Token"),t=window.baseURL||sessionStorage.getItem("serverUrl_str")+"/成绩单模板.xlsx?"+Object(d["a"])("Token");return{url:e,href:t,addShow:!1,fileList:[],searchType:"",title:"航理成绩录入",user:this.sessionData("get","user"),optionsUser:[],selectId:null,searchTime:[],searchUid:null,value:"",options:[],optionsType:[{value:0,label:"航理"},{value:1,label:"英语"}],form:{uid:"",score:"",type:"",time:""},dialogFormVisible:!1,formLabelWidth:"120px",formLabelWidth2:"120px",tableData:[],editType:0,loading:!1,paginations:{total:0,pageIndex:1,pageSize:10,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"}}},created:function(){},mounted:function(){this.init(),this.init2(),this.studyList({count:this.paginations.pageSize,index:this.paginations.pageIndex,uid:this.searchUid,type:this.searchType,start:this.searchTime[0],end:this.searchTime[1]})},methods:{init:function(){var e=this.sessionData("get","userList");(e||e.length)&&(e.push({_id:"",name:"所有"}),this.options=e,this.optionsUser=e)},init2:function(){var e=this.sessionData("get","user");e&&1==e.mode?this.addShow=!0:this.addShow=!1},clean:function(){for(var e in this.form)this.form[e]="";this.dialogFormVisible=!1},selectGet2:function(){},searchBut:function(){this.studyList({count:this.paginations.pageSize,index:this.paginations.pageIndex,uid:this.searchUid,type:this.searchType,start:this.searchTime[0],end:this.searchTime[1]})},handleVideoSuccess:function(e){0==e.code?(this.$message({message:"理论学习文件上传成功！",type:"success"}),this.studyList({count:this.paginations.pageSize,index:this.paginations.pageIndex})):this.$message({message:e.message,type:"success"})},editClick:function(e){var t=this.$tool.deep(e);this.form=t,this.editType=1,this.title="修改成绩",this.dialogFormVisible=!0},deleteOk:function(e){var t=this;r({_id:e._id}).then((function(e){0==e.code&&(t.$message({message:"成绩删除成功！",type:"success"}),t.studyList({count:t.paginations.pageSize,index:t.paginations.pageIndex}))}))},selectGet:function(e){var t={};t=this.options.find((function(t){return t._id===e})),this.form.name=t.name},formatTime:function(e){if(e.ks_time)return this.$tool.formatDate(new Date(e.ks_time),3)},formatType:function(e){return e.type?"英语":"航理"},modelShow:function(e){this.title=e,this.editType=0,this.title="新增成绩",this.dialogFormVisible=!0},studyList:function(e){var t=this,a=this.$tool.deep(e);a.index-=1,o(a).then((function(e){if(0==e.code){var a=t.$unfly(e.data);console.log("查看成绩",a),t.loading=!1,t.paginations.total=a.total,t.tableData=a.array}}))},add:function(){this.editType?(this.title="修改成绩",this.edit()):(this.title="新增成绩",this.newAdd())},edit:function(){var e=this,t=this.$tool.deep(this.form),a={data:t,_id:t._id};delete a.data._id,c(a).then((function(t){0==t.code&&(e.clean(),e.studyList(),e.$message({message:e.title+"修改成功！",type:"success"}))}))},newAdd:function(){var e=this;this.form.uid&&this.form.score&&this.form.ks_time&&(0==this.form.type||1==this.form.type)?(this.form.time&&"number"!=typeof this.form.time&&(this.form.time=this.form.time.getTime()),l({data:this.form}).then((function(t){0==t.code&&(e.clean(),e.studyList(),e.$message({message:e.title+"成功！",type:"success"}))}))):this.$message({message:"每一项都是必填项请将信息填写完整！",type:"warning"})},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleClick:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleSizeChange:function(e){this.paginations.pageSize=e,this.studyList({count:this.paginations.pageSize,index:this.paginations.pageIndex,uid:this.searchUid,type:this.searchType,start:this.searchTime[0],end:this.searchTime[1]})},handleCurrentChange:function(e){console.log(8888888,e),this.paginations.pageIndex=e,this.studyList({count:this.paginations.pageSize,index:this.paginations.pageIndex,uid:this.searchUid,type:this.searchType,start:this.searchTime[0],end:this.searchTime[1]})}}},h=u,p=(a("1570"),a("4023")),m=Object(p["a"])(h,i,s,!1,null,"2f165db2",null);t["default"]=m.exports},e42f:function(e,t,a){},e697:function(e,t,a){"use strict";var i=a("e46b"),s=a("013f")(5),n="find",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),i(i.P+i.F*o,"Array",{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("0e8b")(n)}}]);
//# sourceMappingURL=chunk-b0c24648.0cd34b89.js.map