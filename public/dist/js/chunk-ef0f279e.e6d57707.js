(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef0f279e"],{"7ef8":function(t,e,a){},d744:function(t,e,a){"use strict";var i=a("7ef8"),n=a.n(i);n.a},e8cb:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return o}));var i=a("a27e");function n(t){return Object(i["a"])({url:"/plane/add",method:"post",params:t})}function s(t){return Object(i["a"])({url:"/common/Plane/search",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/plane/modify",method:"post",params:t})}},ed45:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fillcontain"},[a("h3",[t._v("飞机管理")]),a("div",{staticClass:"contain"},[a("div",{staticClass:"table_container"},[a("el-button",{staticClass:"search addPlane",attrs:{type:"primary"},on:{click:function(e){return t.addBut(1)}}},[t._v("新增")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{label:"序号",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.$index+(t.paginations.pageIndex-1)*t.paginations.pageSize+1))])]}}])}),a("el-table-column",{attrs:{property:"fid",label:"飞机ID",align:"center"}}),a("el-table-column",{attrs:{property:"name",label:"飞机版本",align:"center"}}),a("el-table-column",{attrs:{property:"state",label:"飞机状态",formatter:t.formatState,align:"center"}}),a("el-table-column",{attrs:{property:"time",label:"创建时间",formatter:t.formatTime,align:"center"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-edit userBut",on:{click:function(a){return t.handleClick(e.row)}}}),a("el-popconfirm",{attrs:{title:"状态改为正常吗？"},on:{onConfirm:function(a){return t.deleteOk(e.row,1)}}},[a("i",{staticClass:"el-icon-setting userBut",attrs:{slot:"reference"},slot:"reference"})]),a("el-popconfirm",{attrs:{title:"确定维修吗？"},on:{onConfirm:function(a){return t.deleteOk(e.row,2)}}},[a("i",{staticClass:"el-icon-s-tools userBut",attrs:{slot:"reference"},slot:"reference"})]),a("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{onConfirm:function(a){return t.deleteOk(e.row,0)}}},[a("i",{staticClass:"el-icon-delete userBut",attrs:{slot:"reference"},slot:"reference"})])]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[t.paginations.total>0?a("el-pagination",{attrs:{"page-sizes":t.paginations.pageSizes,"page-size":t.paginations.pageSize,layout:t.paginations.layout,total:t.paginations.total,"current-page":t.paginations.pageIndex},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1)])],1)],1)]),a("el-dialog",{staticClass:"customWidth",attrs:{title:t.title,visible:t.dialogFormVisible,id:"customWidth"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"飞机版本：","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"飞机ID：","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.fid,callback:function(e){t.$set(t.form,"fid",e)},expression:"form.fid"}})],1),a("el-form-item",{attrs:{label:"飞机状态：","label-width":t.formLabelWidth}},[a("el-select",{staticClass:"fjzt",attrs:{placeholder:"请选择"},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.optionsFly,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"search userButModle",on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{staticClass:"search userButModle",attrs:{type:"primary"},on:{click:t.add}},[t._v("确定")])],1)],1)],1)},n=[],s=(a("cc57"),a("e8cb")),o={data:function(){return{fileList:[],title:"新增飞机",optionsFly:[{value:"2",label:"维修"},{value:"1",label:"正常"},{value:"3",label:"进厂"}],form:{name:"",fid:"",state:""},dialogFormVisible:!1,formLabelWidth:"120px",formLabelWidth2:"120px",tableData:[],loading:!1,addType:0,paginations:{total:0,pageIndex:1,pageSize:10,pageSizes:[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"}}},mounted:function(){this.planeList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:{$gt:0}}})},methods:{addBut:function(t){for(var e in this.title="新增飞机",this.form)this.form[e]="";this.addType=0,this.dialogFormVisible=!0},deleteOk:function(t,e){var a=this,i={_id:t._id,data:{state:e}};Object(s["b"])(i).then((function(t){0==t.code&&(a.$message({message:"飞机状态修改成功！",type:"success"}),a.planeList({count:a.paginations.pageSize,index:a.paginations.pageIndex,search:{state:{$gt:0}}}))}))},formatState:function(t){return 1==t.state?"正常":2==t.state?"维修":""},formatTime:function(t){if(t.time)return this.$tool.formatDate(new Date(t.time))},edit:function(){var t=this,e=this.$tool.deep(this.form),a={_id:e._id,data:e};delete a.data._id,Object(s["b"])(a).then((function(e){0==e.code&&(t.$message({message:"修改飞机数据成功！",type:"success"}),t.planeList({count:t.paginations.pageSize,index:t.paginations.pageIndex,search:{state:{$gt:0}}}),t.dialogFormVisible=!1)}))},add:function(){this.addType?this.edit():this.add2()},add2:function(){var t=this;this.form.name&&this.form.fid&&this.form.state?Object(s["a"])({data:this.form}).then((function(e){0==e.code&&(t.$message({message:"新增飞机成功！",type:"success"}),t.planeList({count:t.paginations.pageSize,index:t.paginations.pageIndex,search:{state:{$gt:0}}}),t.form.name="",t.form.fid="",t.form.state="",t.dialogFormVisible=!1)})):this.$message({message:"每一项都是必填项请将信息填写完整！",type:"warning"})},handleClick:function(t){this.title="修改飞机数据",t.state=t.state+"",this.form=t,this.addType=1,this.dialogFormVisible=!0},planeList:function(t){var e=this,a=this.$tool.deep(t);a.index-=1,Object(s["c"])(a).then((function(t){if(0==t.code){var a=e.$unfly(t.data);e.loading=!1,e.paginations.total=a.total,e.tableData=a.array;a.array}})),this.planeArr()},planeArr:function(){var t=this,e={count:1e3,index:0,search:{state:1}};Object(s["c"])(e).then((function(e){if(0==e.code){var a=t.$unfly(e.data),i=a.array;for(var n in i)i[n].name=i[n].fid;var s=[];for(var n in i)1==i[n].state&&s.push(i[n]);t.sessionData("set","planeList",s)}}))},handleSizeChange:function(t){this.paginations.pageSize=t,this.planeList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:{$gt:0}}})},handleCurrentChange:function(t){this.paginations.pageIndex=t,this.planeList({count:this.paginations.pageSize,index:this.paginations.pageIndex,search:{state:{$gt:0}}})}}},l=o,r=(a("d744"),a("4023")),c=Object(r["a"])(l,i,n,!1,null,"6f0c8ecd",null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-ef0f279e.e6d57707.js.map